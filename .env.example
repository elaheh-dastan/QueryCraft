# ============================================
# QueryCraft Environment Configuration
# ============================================
# Copy this file to .env and update with your values
# DO NOT commit .env to version control
# ============================================

# ==========================================
# SETUP MODES
# ==========================================
#
# QueryCraft supports two deployment modes:
#
# 1. LOCAL DEVELOPMENT (Django local + Services in Docker)
#    - Run: just dev-services              # Start DB + Ollama in Docker
#    - Then: python manage.py runserver     # Run Django locally
#    - Benefits: Better IDE integration, faster development, easier debugging
#    - Auto-detects localhost:5432 for PostgreSQL connection
#    - No .env file needed (uses sensible defaults)
#
# 2. FULL DOCKER MODE (All services in Docker)
#    - Run: docker compose up              # Everything in containers
#    - Or: just stage-deploy                # Staging deployment
#    - Or: just prod-deploy                 # Production deployment
#    - Production-like environment
#    - Auto-detects internal Docker network connections
#
# ==========================================

# ==========================================
# Django Configuration
# ==========================================

# SECURITY WARNING: Keep the secret key used in production secret!
# Generate with: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
# REQUIRED FOR PRODUCTION: Must be set when using --profile prod
SECRET_KEY=your-secret-key-here-change-this-in-production

# Debug mode (1=True, 0=False)
# NEVER set DEBUG=1 in production!
DEBUG=1

# Comma-separated list of allowed hosts (e.g., localhost,example.com,192.168.1.100)
# REQUIRED FOR PRODUCTION: Must include your domain names
ALLOWED_HOSTS=localhost,127.0.0.1

# ==========================================
# Database Configuration
# ==========================================
# PostgreSQL is the only supported database.
# Django auto-detects connection based on environment:
#   - Running locally: connects to localhost:5432 (Docker container)
#   - Running in Docker: connects to db:5432 (internal network)
#
# Default values (no need to set unless changing):
POSTGRES_DB=querycraft
POSTGRES_USER=querycraft
POSTGRES_PASSWORD=querycraft_password

# Host and port (usually auto-detected, override if needed)
# POSTGRES_HOST=localhost          # Auto: 'localhost' (local) or 'db' (Docker)
# POSTGRES_PORT=5432

# Alternative: Use explicit connection string
# DATABASE_URL=postgresql://user:pass@host:5432/dbname

# ==========================================
# Ollama LLM Configuration
# ==========================================

# Port to expose Ollama API on host machine (default: 11434)
# Required for HYBRID MODE to access Ollama from local Django
OLLAMA_PORT=11434

# Ollama base URL (usually auto-detected, but can override)
# Auto-detection:
#   - In Docker container: uses 'http://ollama:11434' (internal network)
#   - On local machine: uses 'http://localhost:11434' (exposed port)
# Only set this if using an external Ollama instance
# OLLAMA_BASE_URL=http://localhost:11434  # Uncomment to force localhost
# OLLAMA_BASE_URL=http://external-server:11434  # For remote Ollama

# Ollama model name (default: sqlcoder-7b-2:local)
# OLLAMA_MODEL_NAME=sqlcoder-7b-2:local

# ==========================================
# Web Service Configuration
# ==========================================

# Port to expose Django web service (default: 8000)
WEB_PORT=8000

# Seed database with sample data on startup (true/false)
# Only use this for development/testing
SEED_DB=false

# ==========================================
# Production-Only Settings
# ==========================================
# Uncomment and configure these for production deployments

# Database connection string (alternative to individual POSTGRES_* vars)
# DATABASE_URL=postgresql://user:password@host:5432/dbname

# Static files storage (for production)
# STATIC_ROOT=/app/staticfiles
# MEDIA_ROOT=/app/media

# Email configuration (for production)
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=1
# EMAIL_HOST_USER=your-email@example.com
# EMAIL_HOST_PASSWORD=your-email-password

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# LOG_LEVEL=INFO

# CSRF trusted origins (required if behind proxy)
# CSRF_TRUSTED_ORIGINS=https://example.com,https://www.example.com

# ==========================================
# Optional: External Services
# ==========================================

# If using external Ollama instance instead of Docker service
# OLLAMA_BASE_URL=http://external-ollama-host:11434

# If using external PostgreSQL instead of Docker service
# DATABASE_URL=postgresql://user:password@external-host:5432/dbname

# ==========================================
# Development Helpers
# ==========================================

# Skip collectstatic during startup (development only)
# SKIP_COLLECTSTATIC=true

# Django runserver additional options
# RUNSERVER_ARGS=--nothreading --noreload
